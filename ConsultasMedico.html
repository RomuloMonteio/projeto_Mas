<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visão Geral</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            margin: 0;
            padding: 0;
        }

        .header {
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
        }

        .header span {
            font-size: 24px;
            font-weight: bold;
            color: #b60000;
        }

        .header nav {
            display: flex;
            gap: 15px;
        }

        .header a {
            text-decoration: none;
            color: #b60000;
            font-weight: bold;
            padding: 10px 15px;
            border-radius: 5px;
            transition: background-color 0.3s, color 0.3s;
        }

        .header a:hover {
            background-color: #b60000;
            color: white;
        }

        .header a.active {
            background-color: #b60000;
            color: white;
        }

        h2 {
            text-align: center;
            margin: 40px 0 20px;
            color: #333;
        }

        .content {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 20px;
        }

        .search-filter {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .search-filter input, 
        .search-filter select {
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 5px;
            outline: none;
        }

        .search-filter input:focus, 
        .search-filter select:focus {
            border-color: #b60000;
        }

        table {
            width: 80%;
            border-collapse: collapse;
            background-color: white;
            margin: 20px auto;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        thead {
            background-color: #b60000;
            color: white;
        }

        thead th {
            text-align: left;
            padding: 15px;
        }

        tbody td {
            text-align: left;
            padding: 15px;
            border-bottom: 1px solid #ddd;
        }

        tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        tbody tr:hover {
            background-color: #f1f1f1;
        }

        .details {
            color: #b60000;
            text-decoration: none;
            font-weight: bold;
        }

        .details:hover {
            text-decoration: underline;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #ffffff;
            padding: 10px 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: relative;
            height: 40px;
        }

        .doctor-info {
            display: flex;
            align-items: center;
            transition: opacity 0.3s ease;
        }

        .doctor-info img {
            width: 50px; /* Tamanho da foto do médico */
            height: 50px;
            border-radius: 50%; /* Faz a imagem ser redonda */
            margin-right: 10px;
        }

        .doctor-info span {
            font-size: 18px;
            color: #333;
        }

        .notification-button {
            background-color: transparent; /* Remove o fundo do botão */
            border: none;
            color: black;
            padding: 20px; /* Aumenta o tamanho do botão */
            font-size : 24px; /* Aumenta o tamanho da fonte */
            cursor: pointer;
            position: relative;
            transition: transform 1s ease;
        }

        .notification-button:hover {
            color: darkred; /* Cor ao passar o mouse */
        }

        .notification-info {
            display: none;
            align-items: center;
            margin-right: 10px;
            font-size: 18px;
            color: #333;
        }

        .notification-info.visible {
            display: flex;
        }

        .navbar-left {
            position: absolute;
            left: 20px; /* Ajuste conforme necessário */
        }

        .navbar-right {
            margin-left: auto; /* Move the button to the right */
        }

        .hidden {
            opacity: 0; /* Esconde o elemento com transição de opacidade */
            visibility: hidden; /* Esconde o elemento da visualização */
            transition: opacity 0.5s ease, visibility 0.5s ease; /* Adiciona transição */
        }

        /*  Estilos para o botão de logout */
        .logout-button {
            background-color: transparent; /* Remove a cor de fundo padrão */
            color: #b60000; /* Cor do texto */
            border: none; /* Remove a borda */
            padding: 10px 15px; /* Espaçamento interno */
            border-radius: 5px; /* Bordas arredondadas */
            cursor: pointer; /* Muda o cursor para indicar que é clicável */
            transition: background-color 0.3s; /* Transição suave para a cor de fundo */
            font-family: inherit; /* Herda a fonte do elemento pai */
            font-size: inherit; /* Herda o tamanho da fonte do elemento pai */
            font-weight: bold;
            line-height: inherit; /* Herda a altura da linha do elemento pai */
        }

        .logout-button:hover {
            background-color: darkred; /* Cor ao passar o mouse */
            color: white; /* Muda a cor do texto ao passar o mouse */
        }

        /* vibes dos botoes de logout e assim */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal.visible {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: white;
            padding: 20px 40px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            animation: slide-in 0.3s ease;
        }

        .modal-content p {
            font-size: 18px;
            margin-bottom: 20px;
        }

        .modal-buttons {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }

        .modal-button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .modal-button#confirm-logout {
            background-color: #b60000;
            color: white;
        }

        .modal-button#confirm-logout:hover {
            background-color: darkred;
        }

        .modal-button#cancel-logout {
            background-color: #ddd;
            color: black;
        }

        .modal-button#cancel-logout:hover {
            background-color: #bbb;
        }

        @keyframes slide-in {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        	
        .details {
            color: #b60000;
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
        }

        .details:hover {
            text-decoration: underline;
        }

        .details-view {
            display: none;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .details-view h3 {
            color: #b60000;
        }

        .details-view button {
            background-color: #b60000;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }

        .details-view button:hover {
            background-color: darkred;
        }


        /* cena dos detalhes*/
        .details {
            color: #b60000;
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
        }

        .details:hover {
            text-decoration: underline;
        }

        .details-view {
            display: none;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .details-view h3 {
            color: #b60000;
        }

        .details-view button {
            background-color: #b60000;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }

        .details-view button:hover {
            background-color: darkred;
        }


    </style>
</head>
<body>

    <div class="header">
        <div class="container">
            <span>MyHealth'ub</span>
            <nav>
                <a href="painelMedico.html" >Painel</a>
                <a href="ConsultasMedico.html" class="active">Consultas</a>
                <a href="medico_pacientes.html">Pacientes</a>
                <button id="logout-button" class="logout-button">Sair</button>
            </nav>
        </div>
    </div>

    <div class="navbar">
        <div class="notification-info navbar-left" id="notification-info">
            Notificações (<span id="notification-count">0</span>)
        </div>
        <div class="doctor-info" id="doctor-info">
            <img src="imagens/Imagem WhatsApp 2024-12-11 às 10.53.34_7e0db0bb.jpg" alt="Foto do Médico ou paciente" id="doctor-client-photo">
            <span id="doctor-name">Kendrick Lamar</span>
        </div>
        <div class="navbar-right">
            <button class="notification-button" id="notification-button">
                🔔
            </button>
        </div>
    </div>

    <div class="content">
        <h2>Minhas Consultas</h2>
        
        <table id="appointments-table">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Hora</th>
                    <th>Paciente</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>4/12/2024</td>
                    <td>08:00</td>
                    <td>João Silva</td>
                    <td><a href="#" class="details" data-details='{"name":"João Silva","age":30,"sex":"Masculino","bloodPressure":"120/80 mmHg","heartRate":72,"bloodType":"O+","bloodGlucose":130}'>Detalhes</a></td>
                </tr>
                <tr>
                    <td>4/12/2024</td>
                    <td>12:00</td>
                    <td>Maria José</td>
                    <td><a href="#" class="details" data-details='{"name":"João Silva","age":30,"sex":"Masculino","bloodPressure":"120/80 mmHg","heartRate":72,"bloodType":"O+","bloodGlucose":130}'>Detalhes</a></td>
                </tr>
                <tr>
                    <td>4/12/2024</td>
                    <td>14:00</td>
                    <td>João Cruz</td>
                    <td><a href="#" class="details" data-details='{"name":"João Silva","age":30,"sex":"Masculino","bloodPressure":"120/80 mmHg","heartRate":72,"bloodType":"O+","bloodGlucose":130}'>Detalhes</a></td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="details-view" id="details-view">
        <h3>Detalhes do Paciente</h3>
        <p><strong>Nome:</strong> <span id="patient-name"></span></p>
        <p><strong>Idade:</strong> <span id="patient-age"></span></p>
        <p><strong>Sexo:</strong> <span id="patient-sex"></span></p>
        <p><strong>Pressão Arterial:</strong> <span id="patient-bloodPressure"></span></p>
        <p><strong>Frequência Cardíaca:</strong> <span id="patient-heartRate"></span></p>
        <p><strong>Tipo Sanguíneo:</strong> <span id="patient-bloodType"></span></p>
        <p><strong>Glicemia:</strong> <span id="patient-bloodGlucose"></span></p>
        <button id="cancel-appointment">Cancelar Consulta</button>
        <button id="back-to-table">Voltar</button>
    </div>
</div>

    <div id="logout-modal" class="modal">
        <div class="modal-content">
            <p>Deseja realmente sair?</p>
            <div class="modal-buttons">
                <button id="confirm-logout" class="modal-button">Sim</button>
                <button id="cancel-logout" class="modal-button">Não</button>
            </div>
        </div>
    </div>

    <script>


        const notificationButton = document.getElementById('notification-button');
        const doctorInfo = document.getElementById('doctor-info'); // Corrected ID
        const notificationInfo = document.getElementById('notification-info');

        notificationButton.addEventListener('click', () => {
            // Esconde a informação do médico
            doctorInfo.classList.toggle('hidden');
            // Mostra ou esconde a informação de notificações
            notificationInfo.classList.toggle('visible');
        });

        // LOGOUT JS //
        document.getElementById('logout-button').addEventListener('click', function() {
            // Show the modal with fade-in effect
            const modal = document.getElementById('logout-modal');
            modal.classList.add('visible');
        });

        document.getElementById('confirm-logout').addEventListener('click', function() {
            // Redirect to the logout page
            window.location.href = 'index.html'; // Change to the URL of your logout page
        });

        document.getElementById('cancel-logout').addEventListener('click', function() {
            // Hide the modal with fade-out effect
            const modal = document.getElementById('logout-modal');
            modal.classList.remove('visible');
        });
            window.onload = function() {
                const email = localStorage.getItem('userEmail');
                if (email) {
                    exibirNomeMedico();
                    exibirDados(email);
                }
        
                // Configuração do botão de logout
                document.getElementById('logout-button').addEventListener('click', function() {
                    const modal = document.getElementById('logout-modal');
                    modal.classList.add('visible');
                });
        
                document.getElementById('confirm-logout').addEventListener('click', function() {
                    localStorage.removeItem('userEmail');
                    localStorage.removeItem('doctorName');
                    window.location.href = 'index.html';
                });
        
                document.getElementById('cancel-logout').addEventListener('click', function() {
                    const modal = document.getElementById('logout-modal');
                    modal.classList.remove('visible');
                });
        
                // Configuração do botão de notificações
                const notificationButton = document.getElementById('notification-button');
                const doctorInfo = document.getElementById('doctor-info');
                const notificationInfo = document.getElementById('notification-info');
        
                notificationButton.addEventListener('click', () => {
                    // Esconde a informação do médico
                    doctorInfo.classList.toggle('hidden');
                    // Mostra ou esconde a informação de notificações
                    notificationInfo.classList.toggle('visible');
                });
            };
        
            function exibirNomeMedico() {
                const nomeMedico = localStorage.getItem('doctorName');
                if (nomeMedico) {
                    document.getElementById('doctor-name').textContent = nomeMedico;
                    document.getElementById('doctor-client-photo').src = 'path/to/doctor/photo.jpg';
                }
            }
        
            function exibirDados(email) {
                const dados = JSON.parse(localStorage.getItem(email));
                const indicadoresContainer = document.querySelector('.indicators');
                indicadoresContainer.innerHTML = '';
        
                if (dados) {
                    const indicadores = dados.indicadores || {};
                    const consultas = dados.consultas || [];
        
                    Object.keys(indicadores).forEach(ind => {
                        const div = document.createElement('div');
                        div.innerHTML = `<p>${ind}: ${indicadores[ind] || 'Sem dados'}</p>`;
                        indicadoresContainer.appendChild(div);
                    });
        
                    consultas.forEach(consulta => {
                        const consultaDiv = document.createElement('div');
                        consultaDiv.innerHTML = `<p>Consulta com ${consulta.medico} às ${consulta.horario}</p>`;
                        indicadoresContainer.appendChild(consultaDiv);
                    });
                } else {
                    indicadoresContainer.innerHTML = '<p>Nenhum dado encontrado.</p>';
                }
            }

        
        const table = document.getElementById('appointments-table');
        const detailsView = document.getElementById('details-view');

        const patientName = document.getElementById('patient-name');
        const patientAge = document.getElementById('patient-age');
        const patientSex = document.getElementById('patient-sex');
        const patientBloodPressure = document.getElementById('patient-bloodPressure');
        const patientHeartRate = document.getElementById('patient-heartRate');
        const patientBloodType = document.getElementById('patient-bloodType');
        const patientBloodGlucose = document.getElementById('patient-bloodGlucose');

        const backToTableButton = document.getElementById('back-to-table');
        const cancelAppointmentButton = document.getElementById('cancel-appointment');

        // Show details view
        table.addEventListener('click', (event) => {
            if (event.target.classList.contains('details')) {
                event.preventDefault();

                const data = JSON.parse(event.target.dataset.details);

                // Populate details view
                patientName.textContent = data.name;
                patientAge.textContent = data.age;
                patientSex.textContent = data.sex;
                patientBloodPressure.textContent = data.bloodPressure;
                patientHeartRate.textContent = data.heartRate;
                patientBloodType.textContent = data.bloodType;
                patientBloodGlucose.textContent = data.bloodGlucose;

                // Switch views
                table.style.display = 'none';
                detailsView.style.display = 'flex';
            }
        });

        // Back to table view
        backToTableButton.addEventListener('click', () => {
            table.style.display = 'table';
            detailsView.style.display = 'none';
        });

        // Cancel appointment
        cancelAppointmentButton.addEventListener('click', () => {
            const rows = table.querySelectorAll('tbody tr');

            rows.forEach((row) => {
                if (row.querySelector('.details').dataset.details.includes(patientName.textContent)) {
                    row.remove();
                }
            });

            localStorage.setItem('appointments', table.innerHTML);

            // Go back to the table
            table.style.display = 'table';
            detailsView.style.display = 'none';
        });

        // Persist appointments
        window.addEventListener('load', () => {
            const savedAppointments = localStorage.getItem('appointments');
            if (savedAppointments) {
                table.innerHTML = savedAppointments;
            }
        });
    </script>

</body>
</html>